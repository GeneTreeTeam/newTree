/**
 * Handle event once on document
 * @function once
 * @param {string} event - Name of event
 * @param {function} handler - Event handler
 */
'use strict';

var get = require('./get');

var debug = require('debug')('the:window:once');
/** @lends once */


function once(event, handler) {
  var document = get('window.document');

  if (!document) {
    return;
  }

  var handlerWrap = function handlerWrap() {
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    debug('handle', event, args.concat());
    handler.apply(void 0, args);
    debug('remove', event);
    document.removeEventListener(event, handlerWrap);
  };

  debug('add', event);
  document.addEventListener(event, handlerWrap);
}

module.exports = once;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm9uY2UuanMiXSwibmFtZXMiOlsiZ2V0IiwicmVxdWlyZSIsImRlYnVnIiwib25jZSIsImV2ZW50IiwiaGFuZGxlciIsImRvY3VtZW50IiwiaGFuZGxlcldyYXAiLCJhcmdzIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImFkZEV2ZW50TGlzdGVuZXIiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7O0FBTUE7O0FBRUEsSUFBTUEsR0FBRyxHQUFHQyxPQUFPLENBQUMsT0FBRCxDQUFuQjs7QUFDQSxJQUFNQyxLQUFLLEdBQUdELE9BQU8sQ0FBQyxPQUFELENBQVAsQ0FBaUIsaUJBQWpCLENBQWQ7QUFFQTs7O0FBQ0EsU0FBU0UsSUFBVCxDQUFlQyxLQUFmLEVBQXNCQyxPQUF0QixFQUErQjtBQUM3QixNQUFNQyxRQUFRLEdBQUdOLEdBQUcsQ0FBQyxpQkFBRCxDQUFwQjs7QUFDQSxNQUFJLENBQUNNLFFBQUwsRUFBZTtBQUNiO0FBQ0Q7O0FBQ0QsTUFBTUMsV0FBVyxHQUFHLFNBQWRBLFdBQWMsR0FBYTtBQUFBLHNDQUFUQyxJQUFTO0FBQVRBLE1BQUFBLElBQVM7QUFBQTs7QUFDL0JOLElBQUFBLEtBQUssQ0FBQyxRQUFELEVBQVdFLEtBQVgsRUFBc0JJLElBQXRCLFVBQUw7QUFDQUgsSUFBQUEsT0FBTyxNQUFQLFNBQVdHLElBQVg7QUFDQU4sSUFBQUEsS0FBSyxDQUFDLFFBQUQsRUFBV0UsS0FBWCxDQUFMO0FBQ0FFLElBQUFBLFFBQVEsQ0FBQ0csbUJBQVQsQ0FBNkJMLEtBQTdCLEVBQW9DRyxXQUFwQztBQUNELEdBTEQ7O0FBTUFMLEVBQUFBLEtBQUssQ0FBQyxLQUFELEVBQVFFLEtBQVIsQ0FBTDtBQUNBRSxFQUFBQSxRQUFRLENBQUNJLGdCQUFULENBQTBCTixLQUExQixFQUFpQ0csV0FBakM7QUFDRDs7QUFFREksTUFBTSxDQUFDQyxPQUFQLEdBQWlCVCxJQUFqQiIsInNvdXJjZVJvb3QiOiIuLi9saWIiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEhhbmRsZSBldmVudCBvbmNlIG9uIGRvY3VtZW50XG4gKiBAZnVuY3Rpb24gb25jZVxuICogQHBhcmFtIHtzdHJpbmd9IGV2ZW50IC0gTmFtZSBvZiBldmVudFxuICogQHBhcmFtIHtmdW5jdGlvbn0gaGFuZGxlciAtIEV2ZW50IGhhbmRsZXJcbiAqL1xuJ3VzZSBzdHJpY3QnXG5cbmNvbnN0IGdldCA9IHJlcXVpcmUoJy4vZ2V0JylcbmNvbnN0IGRlYnVnID0gcmVxdWlyZSgnZGVidWcnKSgndGhlOndpbmRvdzpvbmNlJylcblxuLyoqIEBsZW5kcyBvbmNlICovXG5mdW5jdGlvbiBvbmNlIChldmVudCwgaGFuZGxlcikge1xuICBjb25zdCBkb2N1bWVudCA9IGdldCgnd2luZG93LmRvY3VtZW50JylcbiAgaWYgKCFkb2N1bWVudCkge1xuICAgIHJldHVyblxuICB9XG4gIGNvbnN0IGhhbmRsZXJXcmFwID0gKC4uLmFyZ3MpID0+IHtcbiAgICBkZWJ1ZygnaGFuZGxlJywgZXZlbnQsIFsuLi5hcmdzXSlcbiAgICBoYW5kbGVyKC4uLmFyZ3MpXG4gICAgZGVidWcoJ3JlbW92ZScsIGV2ZW50KVxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnQsIGhhbmRsZXJXcmFwKVxuICB9XG4gIGRlYnVnKCdhZGQnLCBldmVudClcbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihldmVudCwgaGFuZGxlcldyYXApXG59XG5cbm1vZHVsZS5leHBvcnRzID0gb25jZVxuIl19