/**
 * Handle toggle online/offline
 * @function line
 * @param {function} handler - Event handler
 */
'use strict'

const debug = require('debug')
const get = require('./get')

/** @lends line */
function line (handler) {
  const window = get('window')
  if (!window) {
    return
  }
  const handlerWrap = (connected) => {
    debug('onLine', connected)
    handler(connected)
  }
  window.addEventListener('offline', () => handlerWrap(false))
  window.addEventListener('online', () => handlerWrap(true))
  handlerWrap(get('navigator.onLine'))
}

module.exports = line
